5 REM _SNDPLYON
10 REM BLIT GRAPHICS TEST
20 COLOR 15,1,1:SCREEN 2,2:CLEAR 300,&HA000:DEFINT A-Z
30 REM FILL COLOR INFO
40 _FILVRM(BASE(11),6144,&H41,0):_FILRAM(&HA000,4096,0)
70 REM DEFINE CHARACTER AND MASK IN MEMORY
80 FOR I=0 TO 7:READ A:POKE &HC000+I,A:READ A:POKE &HC008+I,A:NEXT
90 FOR I=0 TO 7:READ A:POKE &HC010+I,A:READ A:POKE &HC018+I,A:NEXT
100 FOR I=0 TO 7:READ A:POKE &HC020+I,A:READ A:POKE &HC028+I,A:NEXT
110 FOR I=0 TO 7:READ A:POKE &HC030+I,A:READ A:POKE &HC038+I,A:NEXT
115 FOR I=0 TO 7:READ A: POKE &HC040+I,A:NEXT
120 DIM MR(8,1):DIM X(1):DIM Y(1):DIM VX(1):DIM VY(1):DIM BG(7):DIM TR(6,1):DIM BR (5):B=0
122 BG(0)=1:FOR I=1 TO 7:BG(I)=BG(I-1)*2:NEXT
125 FOR I=0 TO 1
126 X(I)=INT(RND(1)*230)+1:VX(I)=1
127 Y(I)=INT(RND(1)*40)+1:VY(I)=1
130 MR(3,I)=256:REM ADD-TO VALUE TO NEXT ROW OF BACKGROUND
131 MR(4,I)=&HC020:REM MASK DATA START
132 MR(5,I)=&HC000:REM CHARACTER DATA START
133 MR(6,I)=16:REM ADD-TO VALUE TO NEXT ROW OF MASK AND CHARACTER DATA
134 MR(7,I)=2:REM NUMBER OF COLUMNS OF CHARACTER
135 MR(8,I)=2:REM NUMBER OF ROWS OF CHARACTER
136 NEXT
140 TR(0,0)=&HC000:REM TILE DATA POINTER
141 TR(1,0)=2:REM TILE ROWS
142 TR(2,0)=2:REM TILE COLUMNS
143 TR(3,0)=&HA800:REM DESTINATION ADDRESS
144 TR(4,0)=256:REM DESTINATION ADD-TO VALUE TO NEXT ROW
145 TR(5,0)=16:REM NUMBER OF TILES HORIZONTALLY
146 TR(6,0)=4:REM NUMBER OF TILES VERTICALLY
150 TR(0,1)=&HC040:REM TILE DATA POINTER
151 TR(1,1)=1:REM TILE ROWS
152 TR(2,1)=1:REM TILE COLUMNS
153 TR(3,1)=BASE(12)+4096:REM DESTINATION ADDRESS
154 TR(4,1)=256:REM DESTINATION ADD-TO VALUE TO NEXT ROW
155 TR(5,1)=32:REM NUMBER OF TILES HORIZONTALLY
156 TR(6,1)=8:REM NUMBER OF TILES VERTICALLY
160 BR(0)=&HA000+1*256+1*8:REM SOURCE ADDRESS
161 BR(1)=6*8:REM NUM BYTES IN A ROW
162 BR(2)=6:REM NUMBER OF ROWS
163 BR(3)=256:REM SOURCE ADD-TO VALUE TILL NEXT ROW
164 BR(4)=BASE(12)+17*256+1*8:REM DESTINATION ADDRESS
165 BR(5)=256:REM DESTINATION ADD-TO VALUE TO NEXT ROW
180 _TILEVRM(VARPTR(TR(0,1)))
190 _FILRAM(&HA000,2048,BG(B)):_TILERAM(VARPTR(TR(0,0)))
200 B=(B+1) MOD 8
210 FOR I=0 TO 1
220 MR(0,I)=X(I) MOD 8:REM X SHIFT
230 MR(1,I)=Y(I) MOD 8:REM Y SHIFT
240 MR(2,I)=&HA000+INT(Y(I)/8)*256+INT(X(I)/8)*8:REM BACKGROUND DATA START
250 _BLIT(VARPTR(MR(0,I)))
260 X(I)=X(I)+VX(I):IF X(I)<1 OR X(I)>238 THEN VX(I)=-VX(I)
270 Y(I)=Y(I)+VY(I):IF Y(I)<1 OR Y(I)>110 THEN VY(I)=-VY(I)
280 NEXT
290 _MEMVRM(&HA000,BASE(12),4096,1)
295 _BOXMEMVRM(VARPTR(BR(0)))
300 GOTO 190
990 REM CHARACTER DATA
1000 DATA &B00000000,&B00000000
1010 DATA &B01111111,&B11111110
1020 DATA &B01000000,&B00000010
1030 DATA &B01000000,&B00000010
1040 DATA &B01000000,&B00000010
1050 DATA &B01000000,&B00000010
1060 DATA &B01000000,&B00000010
1070 DATA &B01000000,&B00000010
1080 DATA &B01000000,&B00000010
1090 DATA &B01000000,&B00000010
1100 DATA &B01000000,&B00000010
1110 DATA &B01000000,&B00000010
1120 DATA &B01000000,&B00000010
1130 DATA &B01000000,&B00000010
1140 DATA &B01111111,&B11111110
1150 DATA &B00000000,&B00000000
1160 REM MASK DATA
1170 DATA &B10000000,&B00000001
1180 DATA &B00000000,&B00000000
1190 DATA &B00000000,&B00000000
1200 DATA &B00011111,&B11111000
1210 DATA &B00011111,&B11111000
1220 DATA &B00011111,&B11111000
1230 DATA &B00011111,&B11111000
1240 DATA &B00011111,&B11111000
1250 DATA &B00011111,&B11111000
1260 DATA &B00011111,&B11111000
1270 DATA &B00011111,&B11111000
1280 DATA &B00011111,&B11111000
1290 DATA &B00011111,&B11111000
1300 DATA &B00000000,&B00000000
1310 DATA &B00000000,&B00000000
1320 DATA &B10000000,&B00000001
1330 REM BACKGROUND DATA
1340 DATA &B10101010, &B01010101
1350 DATA &B10101010, &B01010101
1360 DATA &B10101010, &B01010101
1370 DATA &B10101010, &B01010101


