10 REM SPRITE HANDLING TEST
20 COLOR 15,1,1:SCREEN 2,2:CLEAR:DEFINT A-Z
30 REM DEFINE ALL VARIABLES USED IN CODE TO PREVENT MOVING
40 J=0:I=0:DIM SA(3,31):REM DEFINE SPRITE ATRIBUTE TABLE FOR ALL 32 SPRITES, (Y,X,PATTERN,COLOR)
45 X=0:Y=0:VX=1:VY=1:DIM SG(32*3-1)
50 _SPRATRINI (VARPTR (SA(0,0)), &HC000, 1):REM INIT SPRITE ROUTINES
60 FOR I=0 TO 31
70 _SPRSET (I,256,0,I,INT(RND(1)*14)+2)
80 NEXT
90 FOR I=0 TO 7:FOR J=0 TO 3
100 SG((I*4+J)*3)=I*4+J:SG((I*4+J)*3+1)=I*16:SG((I*4+J)*3+2)=J*16
105 NEXT J:NEXT I
110 _FILVRM(BASE(14), 32*32, &HFF,0):REM SET SPRITE PATTERNS
130 _SPRGRPMOV (X,Y,VARPTR(SG(0)),32):GOSUB 1000
180 POKE &HC000,1
190 IF PEEK(&HC000)=1 GOTO 190 ELSE 130
1000 X=X+VX:IF X<0 OR X>192 THEN VX=-VX
1010 Y=Y+VY:IF Y<0 OR Y>64 THEN VY=-VY
1020 RETURN


