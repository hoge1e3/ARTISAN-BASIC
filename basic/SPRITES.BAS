10 REM SPRITE HANDLING TEST
20 COLOR 15,1,1:SCREEN 2,2:CLEAR:DEFINT A-Z
30 REM DEFINE ALL VARIABLES USED IN CODE TO PREVENT MOVING
40 I=0:SU=0:DIM SA(3,31):REM DEFINE SPRITE ATRIBUTE TABLE FOR ALL 32 SPRITES, (Y,X,PATTERN,COLOR)
45 DIM VX(31):DIM VY(31):X=0:Y=0:A=0:B=0
50 _SPRATRINI (VARPTR (SA(0,0)), &HC000):REM INIT SPRITE ROUTINES
60 FOR I=0 TO 31
70 _SPRSET (I,INT(RND(1)*192),INT(RND(1)*256),I,INT(RND(1)*14)+2)
95 IF RND(1)<0.5 THEN VX(I)=-1 ELSE VX(I)=1
96 IF RND(1)<0.5 THEN VY(I)=-1 ELSE VY(I)=1
100 NEXT
110 _FILVRM(BASE(14), 32*32, 255, 0):REM SET SPRITE PATTERNS
120 FOR I=0 TO 1
130 X=SA(1,I):Y=SA(0,I):GOSUB 1000
140 SA(1,I)=X:SA(0,I)=Y
170 NEXT
180 POKE &HC000,1
190 GOTO 120
1000 X=X+VX(I):IF X<-16 OR X>256 THEN VX(I)=-VX(I)
1010 Y=Y+VY(I):IF Y<-16 OR Y>192 THEN VY(I)=-VY(I)
1020 RETURN


