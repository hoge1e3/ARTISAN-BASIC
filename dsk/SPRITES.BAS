10 REM SPRITE HANDLING TEST
20 SCREEN 2,2:CLEAR:DEFINT A-Z
30 REM DEFINE ALL VARIABLES USED IN CODE TO PREVENT MOVING
40 I=0:SU=0:DIM SA(3,31):REM DEFINE SPRITE ATRIBUTE TABLE FOR ALL 32 SPRITES, (Y,X,PATTERN,COLOR)
45 DIM VX(31):DIM VY(31):X=0:Y=0:A=0:B=0
60 FOR I=0 TO 31
70 SA(0,I)=INT(RND(1)*192):SA(1,I)=INT(RND(1)*256)
80 SA(2,I)=I:REM PATTERN
90 SA(3,I)=15:REM WHITE COLOR
95 IF RND(1)<0.5 THEN VX(I)=-1 ELSE VX(I)=1
96 IF RND(1)<0.5 THEN VY(I)=-1 ELSE VY(I)=1
100 NEXT
110 _FILVRM(BASE(14), 32*32, 255, 0):REM SET SPRITE PATTERNS
115 _SPRATRINI (VARPTR (SA(0,0)), VARPTR (SU)):REM INIT SPRITE ROUTINES
120 FOR I=0 TO 3
130 A=VX(I):B=VY(I):X=SA(1,I):Y=SA(0,I):GOSUB 1000
140 VX(I)=A:VY(I)=B:SA(1,I)=X:SA(0,I)=Y
170 NEXT
180 SU=1
190 GOTO 120
1000 X=X+A:IF X<-16 OR X>256 THEN A=-A
1010 Y=Y+B:IF Y<-16 OR Y>192 THEN B=-B
1020 RETURN


